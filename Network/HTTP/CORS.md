## π’»CORS μ—λ¬λ€?

![](/img/CORS/1.png)

#### CORS μ—λ¬λ€ λ¬΄μ—‡μΌκΉμ”?

μΌλ‹¨, CORSλ” `Cross-Origin-Resource-Sharing` μ΄λΌλ” λ»μ…λ‹λ‹¤. λ²μ—­ν•λ©΄, **κµμ°¨ μ¶μ² λ¦¬μ†μ¤ κ³µμ ** μ΄μ§€μ”. `μ¶μ²`κ°€ κµμ°¨ν•λ‹¤λ”κ² λ¬΄μ¨ λ»μΌκΉμ”?

<br />

### π«§Origin (μ¶μ²)

---

![](/img/CORS/2.png)

μ΄ κ·Έλ¦Όμ€ URLμ κµ¬μ„± μ”μ†λ¥Ό λ‚νƒ€λ‚΄λ” κ·Έλ¦Όμ…λ‹λ‹¤.
`Protocol` + `Host` + `Port` = `Origin`
μ΄ μ„Έ κ°κ°€ ν•©μ³μ§„κ² λ°”λ΅ **Origin** μ΄μ£ .

μ΄ μ¤‘ ν• κ°€μ§€λΌλ„ λ‹¤λ¥΄λ‹¤λ©΄, λ‹¤λ¥Έ μ¶μ²κ°€ λκ² λ©λ‹λ‹¤.

> μ°Έκ³ λ΅ μ¶μ² λΉ„κµμ™€ μ°¨λ‹¨μ€ **λΈλΌμ°μ €**κ°€ ν•©λ‹λ‹¤.

<br />

### π«§ SOP μ •μ±…

---

μ¶μ²μ— λ€ν•΄ μ•μ•„λ³΄μ•μΌλ‹, λ™μΌ μ¶μ² μ •μ±…μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

> **SOP(Same Origin Policy)**
> λ™μΌν• μ¶μ²μ—μ„λ§ λ¦¬μ†μ¤λ¥Ό κ³µμ ν•  μ μμ

λ™μΌ μ¶μ² μ„λ²„μ— μλ” λ¦¬μ†μ¤λ” μμ λ΅­κ² κ°€μ Έμ¬ μ μμ§€λ§, λ‹¤λ¥Έ μ¶μ² μ„λ²„μ— μλ” λ¦¬μ†μ¤λ” κ°€μ Έμ¬ μ μ—†μμ„ μλ―Έν•©λ‹λ‹¤.

#### SOP μ •μ±…μ΄ ν•„μ”ν• μ΄μ 

λ™μΌ μ¶μ²λ§ κ°€λ¥ν•κ³  μ™ λ‹¤λ¥Έ μ¶μ²λ” λ§‰μ•„λ†“μ•μ„κΉμ”?
κ³Όκ±°μ—λ” ν”„λ΅ νΈμ—”λ“μ™€ λ°±μ—”λ“λ¥Ό λ”°λ΅ κµ¬μ„±ν•μ§€ μ•κ³  ν• λ²μ— κµ¬μ„±ν•΄μ„ λ¨λ“  μ²λ¦¬κ°€ κ°™μ€ λ„λ©”μΈ μ•μ—μ„ κ°€λ¥ν–μµλ‹λ‹¤. κ·Έλμ„ λ‹¤λ¥Έ μ¶μ²λ΅ μ”μ²­μ„ λ³΄λ‚΄λ” κ² μμ‹¬μ¤λ¬μ΄ ν–‰μ„λ΅ λ³΄μΌ μλ°–μ— μ—†μ—μ£ .

μ‹¤μ λ΅ SOP μ •μ±…μ΄ μ—†λ‹¤λ©΄, ν•΄μ»¤κ°€ CSRF(Cross-Site Request Forgery)λ‚ XSS(Cross-Site Scripting) λ“±μ λ°©λ²•μ„ μ΄μ©ν•΄μ„ μ°λ¦¬κ°€ λ§λ“  μ–΄ν”λ¦¬μΌ€μ΄μ…μ—μ„ ν•΄μ»¤κ°€ μ‹¬μ–΄λ†“μ€ μ½”λ“κ°€ μ‹¤ν–‰ν•μ—¬ κ°μΈ μ •λ³΄λ¥Ό κ°€λ΅μ± μ μμµλ‹λ‹¤.

ν•μ§€λ§ μ‹κ°„μ΄ μ§€λ‚ μ§€κΈμ€ ν΄λΌμ΄μ–ΈνΈμ—μ„ APIλ¥Ό μ§μ ‘ νΈμ¶ν•λ” λ°©μ‹μ΄ λ‹Ήμ—°ν•΄μ΅μµλ‹λ‹¤. κ·Έλ°λ° λ³΄ν†µ ν΄λΌμ΄μ–ΈνΈμ™€ APIλ” λ‹¤λ¥Έ λ„λ©”μΈμ— μλ” κ²½μ°κ°€ λ§μ£ . κ·Έλμ„ CORS μ •μ±…μ΄ μƒκΈ°κ² λμ—μµλ‹λ‹¤. μ¶μ²κ°€ λ‹¤λ¥΄λ”λΌλ„ μ”μ²­κ³Ό μ‘λ‹µμ„ μ£Όκ³ λ°›μ„ μ μλ„λ΅ μ„λ²„μ— λ¦¬μ†μ¤ νΈμ¶μ΄ ν—μ©λ μ¶μ²(Origin)λ¥Ό λ…μ‹ν•΄ μ£Όλ” λ°©μ‹μΌλ΅λ§μ΄μ£ .

<br />

### π«§ CORS

---

μ„μ—μ„ λ§ν• κ²ƒ μ²λΌ, CORSλ” λ‹¤λ¥Έ μ¶μ²μ λ¦¬μ†μ¤ κ³µμ μ— λ€ν• ν—μ©/λΉ„ν—μ© μ •μ±…μ…λ‹λ‹¤. λ‹¤λ¥Έ μ„λ²„μ APIλ¥Ό μ΄μ©ν•΄μ•Όν•λ” μƒν™©μ—μ„ λ‹¤λ¥Έ μ¶μ²λΌλ„ λ¦¬μ†μ¤λ¥Ό λ°›μ•„λ“¤μ΄κΈ° μ„ν•΄μ„μ£ .

#### λΈλΌμ°μ €μ CORS κΈ°λ³Έ λ™μ‘ μ›λ¦¬

1. ν΄λΌμ΄μ–ΈνΈμ—μ„ λ‹¤λ¥Έ μ¶μ²λ΅ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•  λ•, HTTP μ”μ²­μ ν—¤λ”μ— Originμ„ λ‹΄μ•„μ„ μ „λ‹¬ν•©λ‹λ‹¤.

```js
Origin: https://velog.io/@jiwoni1
```

2. μ„λ²„λ” μ΄ μ”μ²­μ— λ€ν• μ‘λ‹µμ„ ν•  λ•, μ‘λ‹µν—¤λ”μ Access-Control-Allow-OriginλΌλ” κ°’μ— μ ‘κ·Όμ΄ ν—μ©λ μ¶μ²μ„ λ‹΄μ•„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•©λ‹λ‹¤.
3. ν΄λΌμ΄μ–ΈνΈμ—μ„ Originκ³Ό μ„λ²„κ°€ λ³΄λ‚΄μ¤€ Access-Control-Allow-Originμ„ λΉ„κµν•©λ‹λ‹¤. κ°™λ‹¤λ©΄ ν—μ©, λ‹¤λ¥΄λ‹¤λ©΄ CORS μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤λ” κ²ƒμ…λ‹λ‹¤.
   <br />

### π«§ CORS μ—λ¬ ν•΄κ²°λ²•

---

μ„ λ‚΄μ©μ— λ”°λ¥΄λ©΄ CORS μ—λ¬λ¥Ό ν•΄κ²°ν•λ ¤λ©΄ `μ„λ²„μ—μ„ Access-Control-Allow-Origin ν—¤λ”μ— ν—μ©ν•  μ¶μ²λ¥Ό κΈ°μ¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ— μ‘λ‹µ`ν•λ©΄ λ¬Έμ κ°€ ν•΄κ²°λλ” κ²ƒμ…λ‹λ‹¤!

#### β–οΈ μ„λ²„μ—μ„ Access-Control-Allow-Origin μ‘λ‹µ ν—¤λ” μ„Έν…ν•κΈ°

μ„λ²„μ—μ„ Access-Control-Allow-Origin ν—¤λ”λ¥Ό μ„¤μ •ν•΄μ„ μ”μ²­μ„ μλ½ν•  μ¶μ²λ¥Ό λ…μ‹μ μΌλ΅ μ§€μ •ν•  μ μμµλ‹λ‹¤. μ΄ ν—¤λ”λ¥Ό μ„Έν…ν•λ©΄ μ¶μ²κ°€ λ‹¤λ¥΄λ”λΌλ„ `https://velog.io/@jiwoni1`μ λ¦¬μ†μ¤ μ”μ²­μ„ ν—μ©ν•κ² λ©λ‹λ‹¤.

```java
'Access-Control-Allow-Origin': <origin> | *
```

`*`λ¥Ό μ„¤μ •ν•λ©΄ μ¶μ²μ— μƒκ΄€μ—†μ΄ λ¦¬μ†μ¤μ— μ ‘κ·Όν•  μ μλ” μ™€μΌλ“μΉ΄λ“μ΄κΈ° λ•λ¬Έμ— λ³΄μ•μ— μ·¨μ•½ν•΄μ§‘λ‹λ‹¤. κ·Έλμ„ `Access-Control-Allow-Origin': https://velog.io/@jiwoni1`κ³Ό κ°™μ΄ μ§μ ‘ ν—μ©ν•  μ¶μ²λ¥Ό μ„Έν…ν•λ” λ°©λ²•μ΄ λ” μΆ‹μµλ‹λ‹¤.  
<br />

#### β–οΈ ν”„λ΅μ‹ μ„λ²„ μ‚¬μ©ν•κΈ°

ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤λ¥Ό μ§μ ‘μ μΌλ΅ μ”μ²­ν•λ” λ€μ‹ , ν”„λ΅μ‹ μ„λ²„λ¥Ό μ‚¬μ©ν•μ—¬ μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ¦¬μ†μ¤λ΅μ μ”μ²­μ„ μ „λ‹¬ν•λ” λ°©λ²•λ„ μμµλ‹λ‹¤. μ΄ λ°©λ²•μ„ μ‚¬μ©ν•λ©΄, ν΄λΌμ΄μ–ΈνΈ λ¦¬μ†μ¤μ™€ λ™μΌν• μ¶μ²μ—μ„ μ”μ²­μ„ λ³΄λ‚΄λ” κ²ƒμ²λΌ λ³΄μ΄λ―€λ΅ CORS μ—λ¬λ¥Ό λ°©μ§€ν•  μ μμµλ‹λ‹¤.

> **ν”„λ΅μ‹ μ„λ²„**  
> Proxyλ” **λ€λ¦¬**, **λ€μ‹ **μ΄λΌλ” λ»  
> ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ΅μ‹ μ„λ²„ μμ‹ μ„ ν†µν•΄μ„ λ‹¤λ¥Έ λ„¤νΈμ›ν¬ μ„λΉ„μ¤μ— κ°„μ ‘μ μΌλ΅ μ ‘μ†ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.  
> μ¦‰, λΈλΌμ°μ €μ™€ μ„λ²„ κ°„μ ν†µμ‹ μ„ λ„μ™€μ£Όλ” `μ¤‘κ³„μ„λ²„`μ…λ‹λ‹¤.
> ![](/img/CORS/3.png)

**μλ¥Ό λ“¤μ–΄, μ”μ²­ν•΄μ•Όν•λ” `http://example.com`λΌλ” μ£Όμ†μ ν΄λΌμ΄μ–ΈνΈκ°€ `http://api.example.com`μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” μƒν™©μ΄λΌλ©΄...**

ν΄λΌμ΄μ–ΈνΈλ” μ§μ ‘μ μΌλ΅ λ¦¬μ†μ¤μ— μ”μ²­ν•λ” λ€μ‹ , `http://example-proxy.com`λΌλ” ν”„λ΅μ‹ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚Ό μ μμµλ‹λ‹¤.  
κ·Έλ¬λ©΄ ν”„λ΅μ‹ μ„λ²„κ°€ `http://api.example.com`μΌλ΅ μ”μ²­μ„ μ „λ‹¬ν•κ³ , μ‘λ‹µμ„ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ— λ°ν™ν•©λ‹λ‹¤.  
μ΄λ ‡κ² ν•λ©΄ μ”μ²­μ΄ `http://example-proxy.com`λ³΄λ‚΄μ§„ κ²ƒμ²λΌ λ³΄μ΄λ―€λ΅, CORS μ—λ¬λ¥Ό ν”Όν•  μ μμµλ‹λ‹¤.

### μμƒ λ©΄μ ‘ μ§λ¬Έ

<details>
   <summary> CORSλ” λ¬΄μ—‡μΈκ°€μ”? </summary>
<br />

CORSλ” `Cross-Origin-Resource-Sharing` μΌλ΅, λ‹¤λ¥Έ μ¶μ²μ—μ„ λ¦¬μ†μ¤λ¥Ό κ°€μ Έμ¤κ³ μ ν•  λ• λ¦¬μ†μ¤ κ³µμ μ— λ€ν• ν—μ©/λΉ„ν—μ© μ •μ±…μ…λ‹λ‹¤.

</details>

<br />
<details>
   <summary> CORS μ—λ¬λ¥Ό ν•΄κ²°ν•λ” λ°©λ²•μ€ λ¬΄μ—‡μΈκ°€μ”? </summary>
<br />

μ„λ²„μ—μ„ Access-Control-Allow-Origin ν—¤λ”λ¥Ό μ„¤μ •ν•΄μ„ μ”μ²­μ„ μλ½ν•  μ¶μ²λ¥Ό μ§€μ •ν•λ” λ°©λ²•κ³Ό ν”„λ΅μ‹ μ„λ²„λ¥Ό μ‚¬μ©ν•΄μ„ λ™μΌ μ¶μ²μΈ κ²ƒμ²λΌ λ³΄μ΄κ² ν•λ” λ°©λ²•μ΄ μμµλ‹λ‹¤.

</details>
<br />

### π’μ¶μ²

[μ•…λ… λ†’μ€ CORS κ°λ… & ν•΄κ²°λ²• - μ •λ¦¬ λνμ™• ](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F)

[ν† μ¤ νμ΄λ¨ΌμΈ -κ²°μ μ°½μ—μ„ CORS λ€μ‘ν•κΈ°](https://docs.tosspayments.com/blog/payment-window-cors-error)

[CORS κ°€ λ­”λ° CORS μ—λ¬ μ–΄λ–»κ² ν•΄κ²°ν•λ”κ±΄λ°](https://velog.io/@jh100m1/CORS-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%AD%94%EB%8D%B0-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EA%B2%B0%ED%95%98%EB%8A%94%EA%B1%B4%EB%8D%B0)
